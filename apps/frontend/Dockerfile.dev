FROM node:20-alpine

WORKDIR /workspace

# Copy workspace configuration
COPY package*.json ./
COPY domain ./domain/
COPY apps/frontend ./apps/frontend/

# Install all dependencies from root (handles workspaces)
RUN yarn install

# Set working directory to frontend
WORKDIR /workspace/apps/frontend

# Expose port
EXPOSE 5173

# Default command (overridden by docker-compose)
CMD ["yarn", "dev", "--host", "0.0.0.0"]